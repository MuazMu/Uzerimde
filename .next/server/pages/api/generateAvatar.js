"use strict";(()=>{var e={};e.id=749,e.ids=[749],e.modules={1738:e=>{e.exports=require("multer")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,r)=>{Object.defineProperty(r,"l",{enumerable:!0,get:function(){return function e(r,a){return a in r?r[a]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,a)):"function"==typeof r&&"default"===a?r:void 0}}})},9561:(e,r,a)=>{a.r(r),a.d(r,{config:()=>P,default:()=>g,routeModule:()=>m});var t={};a.r(t),a.d(t,{config:()=>c,default:()=>f});var n=a(1802),s=a(7153),o=a(6249),i=a(1738),l=a.n(i);let u=l()({storage:l().memoryStorage(),limits:{fileSize:8388608}}),d=(e,r,a)=>new Promise((t,n)=>{a(e,r,e=>e instanceof Error?n(e):t(e))}),c={api:{bodyParser:!1}},f=async(e,r)=>{if("POST"!==e.method)return r.status(405).json({success:!1,message:"Method not allowed",avatarUrl:""});try{if(await d(e,r,u.single("image")),!e.file)return r.status(400).json({success:!1,message:"No image file provided",avatarUrl:""});let a=e.headers["x-user-id"]||`user_${Date.now()}`;e.file.buffer.toString("base64");let t="",n="";try{await new Promise(e=>setTimeout(e,1500)),n=`avatar_${a}_${Date.now()}`,t="/models/avatars/standard-male-fullbody.glb";let r=e.body.gender||"neutral";"female"===r&&(t="/models/avatars/standard-female-fullbody.glb"),console.log(`Generated avatar ${n} for user ${a}`)}catch(e){return console.error("Error calling avatar API:",e),r.status(500).json({success:!1,message:"Error generating avatar with external API",avatarUrl:""})}return r.status(200).json({success:!0,avatarUrl:t,avatarId:n})}catch(e){return console.error("Error generating avatar:",e),r.status(500).json({success:!1,message:"Error generating avatar",avatarUrl:""})}},g=(0,o.l)(t,"default"),P=(0,o.l)(t,"config"),m=new n.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/generateAvatar",pathname:"/api/generateAvatar",bundlePath:"",filename:""},userland:t})},7153:(e,r)=>{var a;Object.defineProperty(r,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},1802:(e,r,a)=>{e.exports=a(145)}};var r=require("../../webpack-api-runtime.js");r.C(e);var a=r(r.s=9561);module.exports=a})();
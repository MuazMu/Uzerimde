(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[516],{7552:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/enhanced-try-on",function(){return r(5284)}])},8778:function(e,a,r){"use strict";r.d(a,{z:function(){return c}});var s=r(5893),t=r(7294),l=r(8426),n=r(2003),i=r(4777);let o=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/90",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=t.forwardRef((e,a)=>{let{className:r,variant:t,size:n,asChild:c=!1,...d}=e,m=c?l.g7:"button";return(0,s.jsx)(m,{className:(0,i.cn)(o({variant:t,size:n,className:r})),ref:a,...d})});c.displayName="Button"},9346:function(e,a,r){"use strict";r.d(a,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return d},eW:function(){return m},ll:function(){return o}});var s=r(5893),t=r(7294),l=r(4777);let n=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...t})});n.displayName="Card";let i=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...t})});i.displayName="CardHeader";let o=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...t})});o.displayName="CardTitle";let c=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",r),...t})});c.displayName="CardDescription";let d=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",r),...t})});d.displayName="CardContent";let m=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",r),...t})});m.displayName="CardFooter"},3517:function(e,a,r){"use strict";r.d(a,{SP:function(){return c},dr:function(){return o},mQ:function(){return i},nU:function(){return d}});var s=r(5893),t=r(7294),l=r(4351),n=r(4777);let i=l.fC,o=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(l.aV,{ref:a,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...t})});o.displayName=l.aV.displayName;let c=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(l.xz,{ref:a,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...t})});c.displayName=l.xz.displayName;let d=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(l.VY,{ref:a,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...t})});d.displayName=l.VY.displayName},4777:function(e,a,r){"use strict";r.d(a,{cn:function(){return l}});var s=r(512),t=r(7851);function l(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,t.m)((0,s.W)(a))}},5284:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return eo}});var s=r(5893),t=r(7294),l=r(9008),n=r.n(l),i=r(1163),o=r(3517),c=r(9346),d=r(8778),m=r(2780),u=r(4777);let x=t.forwardRef((e,a)=>{let{className:r,orientation:t="horizontal",decorative:l=!0,...n}=e;return(0,s.jsx)(m.f,{ref:a,decorative:l,orientation:t,className:(0,u.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",r),...n})});x.displayName=m.f.displayName;var f=r(7483);let h=t.forwardRef((e,a)=>{let{className:r,value:t,...l}=e;return(0,s.jsx)(f.fC,{ref:a,className:(0,u.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...l,children:(0,s.jsx)(f.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})});h.displayName=f.fC.displayName;var p=r(3608),g=r(341),j=r(3283),b=r(4970),v=r.n(b),y=r(5319),N=r(9095),w=r(4771),k=r(7854),z=r(9131),S=r(3857),C=r(9239),R=r(2324),E=r(4913),T=r(7186),_=r(9477),U=r(8600);let M=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsxs)(U.fC,{ref:a,className:(0,u.cn)("relative flex w-full touch-none select-none items-center",r),...t,children:[(0,s.jsx)(U.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,s.jsx)(U.e6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(U.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});function P(){let{progress:e}=(0,w.S)();return(0,s.jsx)(k.V,{center:!0,children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),(0,s.jsxs)("p",{className:"mt-2 text-primary font-medium",children:[e.toFixed(0),"% y\xfckleniyor"]})]})})}function F(e){let{url:a,clothingItems:r,animationMode:l}=e,n=(0,t.useRef)(null),{scene:i,animations:o}=(0,z.L)(a),{actions:c}=(0,S.v)(o,n),[d,m]=(0,t.useState)([]);return(0,t.useEffect)(()=>{if(c&&Object.keys(c).length>0){Object.values(c).forEach(e=>null==e?void 0:e.stop());let t=!1;for(let e of({idle:["Idle","idle_breathing","idle","breathing"],walking:["Walking","walk","walk_forward","strolling"],turning:["Turning","turn","turn_90","rotate"]})[l])if(c[e]){c[e].reset().play(),t=!0;break}if(!t){let t=Object.keys(c);if(t.length>0){var e,a,r,s;let n="idle"===l?"idle":"walking"===l?"walk":"turn",i=t.find(e=>e.toLowerCase().includes(n));i?null===(a=c[i])||void 0===a||null===(e=a.reset())||void 0===e||e.play():null===(s=c[t[0]])||void 0===s||null===(r=s.reset())||void 0===r||r.play()}}}},[c,l]),(0,t.useEffect)(()=>{(async function(){if(r.length>0&&n.current){d.forEach(e=>{var a;null===(a=n.current)||void 0===a||a.remove(e)});let a=[];for(let s of r)try{var e;let r=await z.L.preload(s.modelUrl);if(!r||!r.scene){console.error("Failed to load model scene: ".concat(s.modelUrl));continue}let t=r.scene.clone();s.textureMaps&&t.traverse(e=>{if(e instanceof _.Mesh){var a,r,t,l;let n=e.material;if(null===(a=s.textureMaps)||void 0===a?void 0:a.diffuse){let e=new _.TextureLoader().load(s.textureMaps.diffuse);n.map=e}if(null===(r=s.textureMaps)||void 0===r?void 0:r.normal){let e=new _.TextureLoader().load(s.textureMaps.normal);n.normalMap=e}if(null===(t=s.textureMaps)||void 0===t?void 0:t.roughness){let e=new _.TextureLoader().load(s.textureMaps.roughness);n.roughnessMap=e}if(null===(l=s.textureMaps)||void 0===l?void 0:l.metalness){let e=new _.TextureLoader().load(s.textureMaps.metalness);n.metalnessMap=e}}}),t.name="clothing_".concat(s.id),null===(e=n.current)||void 0===e||e.add(t),a.push(t)}catch(e){console.error("Error loading clothing model: ".concat(s.modelUrl),e)}m(a)}})()},[r]),(0,y.F)(e=>{let{clock:a}=e;n.current&&"turning"===l&&(n.current.rotation.y=.5*a.getElapsedTime())}),(0,s.jsx)("group",{ref:n,dispose:null,children:(0,s.jsx)("primitive",{object:i})})}function A(e){let{avatarUrl:a,clothingItems:r,animationMode:l,cameraPosition:n=[0,1.5,3]}=e,{camera:i}=(0,y.D)();return((0,t.useEffect)(()=>{i.position.set(...n),i.lookAt(0,1,0)},[i,n]),a)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("ambientLight",{intensity:.5}),(0,s.jsx)("directionalLight",{position:[10,10,5],intensity:1,castShadow:!0}),(0,s.jsx)("directionalLight",{position:[-10,10,5],intensity:.5,castShadow:!0}),(0,s.jsx)("spotLight",{position:[-5,5,5],intensity:.8,angle:Math.PI/6,penumbra:.2,castShadow:!0}),(0,s.jsx)(F,{url:a,clothingItems:r,animationMode:l}),(0,s.jsx)(C.qA,{preset:"studio"}),(0,s.jsx)(R.j,{opacity:.5,scale:10,blur:2,far:4,resolution:256,color:"#000000"}),(0,s.jsx)(E.z,{enablePan:!1,minPolarAngle:Math.PI/6,maxPolarAngle:Math.PI/2,minDistance:2,maxDistance:5,autoRotate:"turning"===l,autoRotateSpeed:2,enableDamping:!0,dampingFactor:.1})]}):null}M.displayName=U.fC.displayName;var D=e=>{let{avatarUrl:a,selectedItems:r,isLoading:l,animationMode:n,initialZoom:i=3,initialRotation:o=0,enableControls:c=!0}=e,[m,u]=(0,t.useState)(i),[x,f]=(0,t.useState)(o),[h,p]=(0,t.useState)("turning"===n),[g,j]=(0,t.useState)(n);return(0,t.useEffect)(()=>{j(n),p("turning"===n)},[n]),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md h-[600px]",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"3D \xd6nizleme"}),(0,s.jsx)("div",{className:"relative h-[500px] w-full bg-gray-100 rounded-md overflow-hidden",children:l?(0,s.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-secondary"}),(0,s.jsx)("p",{className:"ml-3 text-gray-600",children:"Avatar oluşturuluyor..."})]}):a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(N.Xz,{shadows:!0,children:[(0,s.jsx)(T.c,{makeDefault:!0,position:[0,1.5,m],fov:50,near:.1,far:100}),(0,s.jsx)(A,{avatarUrl:a,clothingItems:r,animationMode:g,cameraPosition:[Math.sin(x)*m,1.5,Math.cos(x)*m]}),(0,s.jsx)(P,{})]}),c&&(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-black/30 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,s.jsx)("p",{className:"text-white text-xs mb-1",children:"Yakınlaştır"}),(0,s.jsx)(M,{value:[m],min:2,max:5,step:.1,onValueChange:e=>u(e[0])})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(d.z,{variant:"idle"===g?"default":"outline",size:"sm",onClick:()=>{j("idle"),p(!1)},children:"Duruş"}),(0,s.jsx)(d.z,{variant:"walking"===g?"default":"outline",size:"sm",onClick:()=>{j("walking"),p(!1)},children:"Y\xfcr\xfcy\xfcş"}),(0,s.jsx)(d.z,{variant:"turning"===g?"default":"outline",size:"sm",onClick:()=>{j("turning"),p(!0)},children:"360\xb0 D\xf6n\xfcş"})]})]})})]}):(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-gray-500",children:"L\xfctfen 3D avatarınızı oluşturmak i\xe7in bir fotoğraf y\xfckleyin."})})}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:r.length>0?"Giyilen: ".concat(r.map(e=>e.name).join(", ")):"Kıyafet denemek i\xe7in katalogdan \xfcr\xfcn se\xe7in."})})]})},B=r(5443);let Z=t.forwardRef((e,a)=>{let{className:r,children:t,...l}=e;return(0,s.jsxs)(B.fC,{ref:a,className:(0,u.cn)("relative overflow-hidden",r),...l,children:[(0,s.jsx)(B.l_,{className:"h-full w-full rounded-[inherit]",children:t}),(0,s.jsx)(I,{}),(0,s.jsx)(B.Ns,{})]})});Z.displayName=B.fC.displayName;let I=t.forwardRef((e,a)=>{let{className:r,orientation:t="vertical",...l}=e;return(0,s.jsx)(B.gb,{ref:a,orientation:t,className:(0,u.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...l,children:(0,s.jsx)(B.q4,{className:"relative flex-1 rounded-full bg-border"})})});I.displayName=B.gb.displayName;let L=(0,r(2003).j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function O(e){let{className:a,variant:r,...t}=e;return(0,s.jsx)("div",{className:(0,u.cn)(L({variant:r}),a),...t})}var Y=r(2190),V=e=>{let{items:a,onSelectionChange:r,initialSelection:l}=e,[n,i]=(0,t.useState)({upper:null,lower:null,shoes:null,full:null,...l}),[m,u]=(0,t.useState)("upper"),x={upper:a.filter(e=>"upper"===e.category),lower:a.filter(e=>"lower"===e.category),shoes:a.filter(e=>"shoes"===e.category),full:a.filter(e=>"full"===e.category)},f=e=>{let a={...n};"full"===e.category?(a.upper=null,a.lower=null,a.shoes=null,a.full=e):(a.full=null,a[e.category]=e),i(a)},h=e=>{let a={...n};a[e]=null,i(a)};return(0,t.useEffect)(()=>{r(n)},[n,r]),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Kıyafet Se\xe7imi"}),(0,s.jsxs)("div",{className:"mb-4 flex flex-wrap gap-2",children:[Object.entries(n).map(e=>{let[a,r]=e;return r&&(0,s.jsxs)(O,{variant:"secondary",className:"flex items-center gap-1 py-1.5 px-3",children:[(0,s.jsx)("span",{className:"mr-1 capitalize",children:"upper"===a?"\xdcst":"lower"===a?"Alt":"shoes"===a?"Ayakkabı":"Tam Set"}),(0,s.jsx)("span",{className:"font-semibold",children:r.name}),(0,s.jsx)(d.z,{variant:"ghost",size:"icon",className:"h-4 w-4 ml-1",onClick:()=>h(a),children:(0,s.jsx)(Y.Z,{className:"h-3 w-3"})})]},r.id)}),Object.values(n).every(e=>null===e)&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Hen\xfcz bir kıyafet se\xe7ilmedi."})]}),(0,s.jsxs)(o.mQ,{defaultValue:"upper",value:m,onValueChange:e=>u(e),children:[(0,s.jsxs)(o.dr,{className:"w-full grid grid-cols-4",children:[(0,s.jsx)(o.SP,{value:"upper",children:"\xdcst Giyim"}),(0,s.jsx)(o.SP,{value:"lower",children:"Alt Giyim"}),(0,s.jsx)(o.SP,{value:"shoes",children:"Ayakkabı"}),(0,s.jsx)(o.SP,{value:"full",children:"Tam Set"})]}),Object.entries(x).map(e=>{let[a,r]=e;return(0,s.jsx)(o.nU,{value:a,className:"mt-4",children:(0,s.jsx)(Z,{className:"h-96",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[r.map(e=>{var a;return(0,s.jsx)(c.Zb,{className:"cursor-pointer transition-all hover:scale-105 ".concat((null===(a=n[e.category])||void 0===a?void 0:a.id)===e.id?"ring-2 ring-primary":""),onClick:()=>f(e),children:(0,s.jsxs)(c.aY,{className:"p-2",children:[(0,s.jsxs)("div",{className:"aspect-square relative overflow-hidden rounded-md mb-2",children:[(0,s.jsx)("img",{src:e.imageUrl,alt:e.name,className:"object-cover w-full h-full"}),e.brand&&(0,s.jsx)(O,{className:"absolute top-2 left-2 bg-white/70 text-black",children:e.brand}),e.price&&(0,s.jsxs)(O,{className:"absolute bottom-2 right-2 bg-black/70",children:[e.price," ₺"]})]}),(0,s.jsx)("div",{className:"text-sm font-medium truncate",children:e.name}),e.description&&(0,s.jsx)("p",{className:"text-xs text-gray-500 line-clamp-2",children:e.description})]})},e.id)}),0===r.length&&(0,s.jsx)("div",{className:"col-span-full py-8 text-center text-gray-500",children:"Bu kategoride \xfcr\xfcn bulunamadı."})]})})},a)})]})]})},G=r(8865),K=r(3765),X=r(2511);let H=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:a,className:(0,u.cn)("w-full caption-bottom text-sm",r),...t})})});H.displayName="Table";let Q=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("thead",{ref:a,className:(0,u.cn)("[&_tr]:border-b",r),...t})});Q.displayName="TableHeader";let W=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("tbody",{ref:a,className:(0,u.cn)("[&_tr:last-child]:border-0",r),...t})});W.displayName="TableBody",t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("tfoot",{ref:a,className:(0,u.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...t})}).displayName="TableFooter";let q=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("tr",{ref:a,className:(0,u.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...t})});q.displayName="TableRow";let J=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("th",{ref:a,className:(0,u.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...t})});J.displayName="TableHead";let $=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("td",{ref:a,className:(0,u.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...t})});$.displayName="TableCell",t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("caption",{ref:a,className:(0,u.cn)("mt-4 text-sm text-muted-foreground",r),...t})}).displayName="TableCaption";var ee=e=>{let{recommendations:a,selectedItems:r,bodyMeasurements:t,showMeasurements:l=!1}=e,n=e=>e>=.8?{text:"Y\xfcksek Uyumluluk",color:"text-green-600",icon:(0,s.jsx)(G.Z,{className:"h-4 w-4"})}:e>=.5?{text:"Orta Uyumluluk",color:"text-amber-600",icon:(0,s.jsx)(K.Z,{className:"h-4 w-4"})}:{text:"D\xfcş\xfck Uyumluluk",color:"text-red-600",icon:(0,s.jsx)(K.Z,{className:"h-4 w-4"})};return(0,s.jsxs)(c.Zb,{className:"w-full",children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(X.Z,{className:"h-5 w-5"}),"Beden \xd6nerileri"]}),(0,s.jsx)(c.SZ,{children:"V\xfccut \xf6l\xe7\xfclerinize g\xf6re \xf6nerilen bedenler"})]}),(0,s.jsx)(c.aY,{children:0===r.length?(0,s.jsx)("p",{className:"text-center text-gray-500 my-8",children:"Beden \xf6nerileri i\xe7in kıyafet se\xe7imi yapınız."}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"grid gap-3",children:r.map(e=>{let r=a[e.id];if(!r)return null;let t=n(r.confidence);return(0,s.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:e.name}),e.brand&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.brand})]}),(0,s.jsxs)(O,{variant:"outline",className:"flex items-center gap-1 ".concat(t.color),children:[t.icon,t.text]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-3",children:["upper"===e.category||"full"===e.category?(0,s.jsxs)("div",{className:"border rounded p-2 text-center",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"\xdcst Beden"}),(0,s.jsx)("div",{className:"text-lg font-bold",children:r.upperSize})]}):null,"lower"===e.category||"full"===e.category?(0,s.jsxs)("div",{className:"border rounded p-2 text-center",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Alt Beden"}),(0,s.jsx)("div",{className:"text-lg font-bold",children:r.lowerSize})]}):null,"shoes"===e.category?(0,s.jsxs)("div",{className:"border rounded p-2 text-center",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Ayakkabı"}),(0,s.jsx)("div",{className:"text-lg font-bold",children:r.shoeSize})]}):null,(0,s.jsxs)("div",{className:"border rounded p-2 text-center",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Fit"}),(0,s.jsx)("div",{className:"text-sm font-medium capitalize",children:"tight"===r.fit?"Dar":"regular"===r.fit?"Normal":"Bol"})]})]}),r.brandSpecific&&Object.keys(r.brandSpecific).length>0&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-1",children:"Marka \xd6zel Bedenler"}),(0,s.jsxs)(H,{children:[(0,s.jsx)(Q,{children:(0,s.jsxs)(q,{children:[(0,s.jsx)(J,{children:"Marka"}),(0,s.jsx)(J,{children:"\xdcst Beden"}),(0,s.jsx)(J,{children:"Alt Beden"})]})}),(0,s.jsx)(W,{children:Object.entries(r.brandSpecific).map(e=>{let[a,r]=e;return(0,s.jsxs)(q,{children:[(0,s.jsx)($,{className:"font-medium",children:a}),(0,s.jsx)($,{children:r.upperSize||"-"}),(0,s.jsx)($,{children:r.lowerSize||"-"})]},a)})})]})]})]},e.id)})}),l&&t&&(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h3",{className:"text-sm font-medium mb-2",children:"V\xfccut \xd6l\xe7\xfcleriniz"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:[(0,s.jsxs)("div",{className:"border rounded p-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 block",children:"Boy"}),(0,s.jsxs)("span",{className:"font-medium",children:[t.height," cm"]})]}),(0,s.jsxs)("div",{className:"border rounded p-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 block",children:"G\xf6ğ\xfcs"}),(0,s.jsxs)("span",{className:"font-medium",children:[t.chest," cm"]})]}),(0,s.jsxs)("div",{className:"border rounded p-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 block",children:"Bel"}),(0,s.jsxs)("span",{className:"font-medium",children:[t.waist," cm"]})]}),(0,s.jsxs)("div",{className:"border rounded p-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 block",children:"Kal\xe7a"}),(0,s.jsxs)("span",{className:"font-medium",children:[t.hips," cm"]})]}),(0,s.jsxs)("div",{className:"border rounded p-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 block",children:"Omuz"}),(0,s.jsxs)("span",{className:"font-medium",children:[t.shoulders," cm"]})]}),(0,s.jsxs)("div",{className:"border rounded p-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 block",children:"İ\xe7 Bacak"}),(0,s.jsxs)("span",{className:"font-medium",children:[t.inseam," cm"]})]})]})]})]})})]})},ea=r(7066),er=r(3454);let es=async e=>{let a=new FormData;a.append("image",e);try{return(await ea.Z.post("https://api.avaturn.me/v1/generate",a,{headers:{Authorization:"Bearer ".concat(er.env.NEXT_PUBLIC_AVATURN_API_KEY),"Content-Type":"multipart/form-data"}})).data.avatarUrl}catch(e){throw console.error("Error generating avatar:",e),Error("Failed to generate 3D avatar")}};var et=r(3454);let el=async e=>{let a=new FormData;a.append("image",e);try{return(await ea.Z.post("https://api.sizer.me/v1/measurements",a,{headers:{Authorization:"Bearer ".concat(et.env.NEXT_PUBLIC_SIZER_API_KEY),"Content-Type":"multipart/form-data"}})).data.measurements}catch(e){throw console.error("Error estimating measurements:",e),Error("Failed to estimate body measurements")}},en=async(e,a)=>{try{return(await ea.Z.post("https://api.sizer.me/v1/batch-recommendations",{measurements:e,productIds:a},{headers:{Authorization:"Bearer ".concat(et.env.NEXT_PUBLIC_SIZER_API_KEY),"Content-Type":"application/json"}})).data.recommendations}catch(e){throw console.error("Error getting batch size recommendations:",e),Error("Failed to get batch size recommendations")}},ei=[{id:"upper-1",name:"Mavi Tiş\xf6rt",category:"upper",imageUrl:"https://example.com/images/tshirt-blue.jpg",modelUrl:"https://example.com/models/tshirt-blue.glb",brand:"Koton",price:"199",description:"Pamuklu mavi tiş\xf6rt"},{id:"upper-2",name:"Beyaz G\xf6mlek",category:"upper",imageUrl:"https://example.com/images/shirt-white.jpg",modelUrl:"https://example.com/models/shirt-white.glb",brand:"Mavi",price:"399",description:"100% pamuk beyaz g\xf6mlek"},{id:"lower-1",name:"Siyah Pantolon",category:"lower",imageUrl:"https://example.com/images/pants-black.jpg",modelUrl:"https://example.com/models/pants-black.glb",brand:"LCW",price:"349",description:"Rahat kesim siyah pantolon"},{id:"shoes-1",name:"Spor Ayakkabı",category:"shoes",imageUrl:"https://example.com/images/sneakers.jpg",modelUrl:"https://example.com/models/sneakers.glb",brand:"Nike",price:"1299",description:"G\xfcnl\xfck spor ayakkabı"},{id:"full-1",name:"Takım Elbise",category:"full",imageUrl:"https://example.com/images/suit.jpg",modelUrl:"https://example.com/models/suit.glb",brand:"Kiğılı",price:"2899",description:"Slim fit takım elbise"}];var eo=()=>{(0,i.useRouter)();let e=(0,t.useRef)(null),[a,r]=(0,t.useState)(null),[l,m]=(0,t.useState)(null),[u,f]=(0,t.useState)(!1),[b,y]=(0,t.useState)(!1),[N,w]=(0,t.useState)(0),[k,z]=(0,t.useState)({upper:null,lower:null,shoes:null,full:null}),[S,C]=(0,t.useState)(null),[R,E]=(0,t.useState)({}),[T,_]=(0,t.useState)("3d"),[U,M]=(0,t.useState)("idle"),P=Object.values(k).filter(Boolean),F=async()=>{if(a){y(!0),w(0);try{let e=setInterval(()=>{w(a=>a>=95?(clearInterval(e),95):a+5)},300),r=await fetch(a),s=await r.blob(),t=new File([s],"user-image.jpg",{type:"image/jpeg"}),l=await es(t);m(l);let n=await el(t);C(n);let i=await en(n,ei.map(e=>e.id));E(i),clearInterval(e),w(100)}catch(e){console.error("Error generating avatar:",e)}finally{setTimeout(()=>{y(!1)},500)}}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n(),{children:[(0,s.jsx)("title",{children:"\xdczerimde - Gelişmiş Sanal Prova"}),(0,s.jsx)("meta",{name:"description",content:"\xdczerimde ile gelişmiş sanal kıyafet prova deneyimi"})]}),(0,s.jsxs)("main",{className:"container mx-auto py-6 px-4",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"\xdczerimde"}),(0,s.jsx)("p",{className:"text-gray-500 text-center max-w-2xl",children:"Gelişmiş sanal kıyafet prova deneyimi ile kıyafetleri 3 boyutlu olarak \xfczerinizde g\xf6r\xfcn, beden \xf6nerilerini alın ve alışverişinizi kolayca tamamlayın."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,s.jsxs)(c.Zb,{children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(p.Z,{className:"h-5 w-5"}),"Fotoğraf Y\xfckle"]}),(0,s.jsx)(c.SZ,{children:"Fotoğrafınızla 3D avatarınızı oluşturun"})]}),(0,s.jsx)(c.aY,{children:a?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"aspect-[3/4] w-full rounded-md overflow-hidden bg-muted",children:(0,s.jsx)("img",{src:a,alt:"Kullanıcı Fotoğrafı",className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(d.z,{variant:"outline",onClick:()=>r(null),children:"Farklı Fotoğraf Se\xe7"}),(0,s.jsx)(d.z,{onClick:F,disabled:b,children:b?"Avatar Oluşturuluyor...":"3D Avatar Oluştur"}),b&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)(h,{value:N,className:"mb-1"}),(0,s.jsx)("p",{className:"text-xs text-center text-gray-500",children:N<100?"İşleniyor...":"Tamamlandı!"})]})]})]}):(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)(o.mQ,{defaultValue:"camera",children:[(0,s.jsxs)(o.dr,{className:"w-full grid grid-cols-2",children:[(0,s.jsx)(o.SP,{value:"camera",children:"Kamera"}),(0,s.jsx)(o.SP,{value:"upload",children:"Dosya Y\xfckle"})]}),(0,s.jsxs)(o.nU,{value:"camera",className:"space-y-4",children:[(0,s.jsx)("div",{className:"aspect-[3/4] w-full rounded-md overflow-hidden bg-muted",children:(0,s.jsx)(v(),{ref:e,mirrored:!0,screenshotFormat:"image/jpeg",videoConstraints:{facingMode:"user"},className:"w-full h-full object-cover"})}),(0,s.jsxs)(d.z,{className:"w-full",onClick:()=>{f(!0),setTimeout(()=>{var a;let s=null===(a=e.current)||void 0===a?void 0:a.getScreenshot();s&&(r(s),f(!1))},500)},disabled:u,children:[(0,s.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),u?"Fotoğraf \xc7ekiliyor...":"Fotoğraf \xc7ek"]})]}),(0,s.jsxs)(o.nU,{value:"upload",className:"space-y-4",children:[(0,s.jsx)("div",{className:"aspect-[3/4] w-full flex items-center justify-center rounded-md border-2 border-dashed border-gray-300 bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center p-4",children:[(0,s.jsx)(j.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Fotoğrafınızı y\xfcklemek i\xe7in tıklayın veya s\xfcr\xfckleyin"}),(0,s.jsx)("input",{type:"file",accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(s){let e=new FileReader;e.onload=e=>{var a;r(null===(a=e.target)||void 0===a?void 0:a.result)},e.readAsDataURL(s)}}})]})}),(0,s.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Desteklenen formatlar: JPG, PNG, HEIC"})]})]})})})]}),(0,s.jsx)(V,{items:ei,onSelectionChange:e=>{z(e)}})]}),(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)(c.Zb,{children:[(0,s.jsxs)(c.Ol,{className:"pb-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(c.ll,{children:"Sanal Prova"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(d.z,{variant:"3d"===T?"default":"outline",size:"sm",onClick:()=>_("3d"),children:"3D G\xf6r\xfcn\xfcm"}),(0,s.jsx)(d.z,{variant:"2d"===T?"default":"outline",size:"sm",onClick:()=>_("2d"),children:"2D G\xf6r\xfcn\xfcm"})]})]}),(0,s.jsx)(x,{className:"my-1"})]}),(0,s.jsx)(c.aY,{className:"p-0",children:"3d"===T?(0,s.jsx)(D,{avatarUrl:l,selectedItems:P,isLoading:b,animationMode:U,enableControls:!0}):(0,s.jsx)("div",{className:"p-4 h-[600px] flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-gray-500",children:l?"2D g\xf6r\xfcn\xfcm yakında eklenecek":"L\xfctfen \xf6nce 3D avatarınızı oluşturun"})})})]}),(0,s.jsx)(ee,{recommendations:R,selectedItems:P,bodyMeasurements:S||void 0,showMeasurements:!0})]})]})]})]})}}},function(e){e.O(0,[737,75,782,913,888,774,179],function(){return e(e.s=7552)}),_N_E=e.O()}]);